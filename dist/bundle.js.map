{"version":3,"sources":["webpack://paste-and-upload-sandbox/./src/index.ts"],"names":["textarea","document","getElementById","onpaste","event","replacement","file","form","item","clipboardData","items","selectionStart","selectionEnd","kind","type","startsWith","getAsFile","FormData","append","fetch","method","mode","body","then","response","console","log","catch","error","name","setRangeText","preventDefault"],"mappings":"MAAA,IAaQA,KAAWC,SAASC,eAAe,WAChCC,QAAU,SAACC,GAClB,IAQIC,EAvBaC,EACbC,EAcEC,EAAOJ,EAAMK,cAAcC,MAAM,GACjCC,EAAiBX,EAASW,eAC1BC,EAAeZ,EAASY,aAEb,UAAbJ,EAAKK,OAKLL,EAAKM,KAAKC,WAAW,YAxBRT,EAyBWE,EAAKQ,aAxB7BT,EAAO,IAAIU,UACZC,OAAO,OAAQZ,GACpBa,MAAM,+BAAgC,CACpCC,OAAQ,OACRC,KAAM,UACNC,KAAMf,IACLgB,MAAK,SAAAC,GAAY,OAAAC,QAAQC,IAAIF,MAAWG,OAAM,SAAAC,GAAS,OAAAH,QAAQC,IAAIE,MAkBlEvB,EAhBGC,EAAKuB,MAmBV7B,EAAS8B,aAAazB,EAAaM,EAAgBC,GAEnDR,EAAM2B,kB","file":"bundle.js","sourcesContent":["const uploadImage = (file: File): string => {\n  const form = new FormData()\n  form.append('file', file)\n  fetch('http://localhost:4567/upload', {\n    method: 'POST',\n    mode: 'no-cors',\n    body: form,\n  }).then(response => console.log(response)).catch(error => console.log(error))\n\n  return file.name\n}\n\nconst main = () => {\n  const textarea = document.getElementById('editor') as HTMLTextAreaElement\n  textarea.onpaste = (event) => {\n    const item = event.clipboardData.items[0]\n    const selectionStart = textarea.selectionStart\n    const selectionEnd = textarea.selectionEnd\n\n    if (item.kind == 'string') {\n      return\n    }\n\n    let replacement: string;\n    if (item.type.startsWith('image/')) {\n      replacement = uploadImage(item.getAsFile())\n    }\n\n    textarea.setRangeText(replacement, selectionStart, selectionEnd)\n\n    event.preventDefault\n  }\n}\n\nmain()\n"],"sourceRoot":""}